<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StyleMate - Profilim</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .gradient-bg {
            background: var(--primary-gradient);
        }

        .glass-effect {
            backdrop-filter: blur(15px) saturate(180%);
            background: rgba(255, 255, 255, 0.85);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        .style-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .style-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .style-card.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .slide-in {
            animation: slideIn 0.8s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .edit-mode .readonly-content { display: none; }
        .edit-mode .edit-content { display: block; }
        .view-mode .readonly-content { display: block; }
        .view-mode .edit-content { display: none; }
        .profile-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .brand-tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin: 4px;
            font-size: 14px;
        }
        .color-tag {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin: 4px;
            font-size: 14px;
        }
        .nav-button {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-400 via-indigo-500 to-blue-600 min-h-screen">
    <!-- Navigation -->
        <nav class="gradient-bg shadow-xl sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <i class="fas fa-magic text-2xl text-white mr-3 floating"></i>
                        <span class="text-xl font-bold text-white">ModiApp</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="window.location.href='/mainpage'" class="nav-button text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:scale-105 transition-all duration-300">
                            <i class="fas fa-user"></i>
                            <span>Ana Sayfa</span>
                        </button>
                        <button onclick="logout()" class="nav-button bg-red-500 bg-opacity-80 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Çıkış</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    <!-- Floating Icons -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <i class="fas fa-user-circle text-white opacity-10 text-8xl absolute top-10 left-10 floating"></i>
        <i class="fas fa-cog text-white opacity-10 text-6xl absolute top-32 right-20 floating" style="animation-delay: -1s;"></i>
        <i class="fas fa-star text-white opacity-10 text-7xl absolute bottom-20 left-32 floating" style="animation-delay: -2s;"></i>
    </div>

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-10 slide-in">
            <div class="mb-6">
                <i class="fas fa-user-circle text-6xl text-white"></i>
            </div>
            <h1 class="text-4xl font-bold text-white mb-4">Profilim</h1>
            <p class="text-xl text-white/90">Stil tercihlerinizi görüntüleyin ve güncelleyin</p>
        </div>

        <!-- Profile Content -->
        <div class="glass-effect p-8 slide-in view-mode" id="profileContainer" style="animation-delay: 0.2s;">
            
            <!-- Profile Header -->
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-sparkles mr-3 text-purple-500"></i>
                        Stil Profiliniz
                    </h2>
                    <p class="text-gray-600 mt-2">Son güncelleme: <span id="lastUpdate">Bugün</span></p>
                </div>
                <button 
                    id="editBtn"
                    onclick="toggleEditMode()"
                    class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-purple-600 transform hover:scale-105 transition-all duration-200 shadow-lg"
                >
                    <i class="fas fa-edit mr-2"></i>
                    Düzenle
                </button>
            </div>

            <!-- Current Style Selection -->
            <div class="profile-info">
                <h3 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <i class="fas fa-heart mr-3 text-pink-400"></i>
                    Seçili Stiliniz
                </h3>
                
                <!-- View Mode -->
                <div class="readonly-content">
                    <div class="bg-white/20 rounded-lg p-4">
                        <div class="flex items-center" id="currentStyle">
                            <i class="fas fa-tshirt text-3xl mr-4 text-blue-400"></i>
                            <div>
                                <h4 class="text-lg font-semibold text-white">Casual</h4>
                                <p class="text-white/80">Rahat, günlük ve konforlu kıyafetler</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Edit Mode -->
                <div class="edit-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="style-card glass-effect p-4 rounded-xl" onclick="selectStyle('casual')">
                            <input type="radio" name="style" value="casual" class="hidden" id="casual" checked>
                            <div class="text-center">
                                <i class="fas fa-tshirt text-3xl mb-2 text-blue-500"></i>
                                <h4 class="text-lg font-semibold">Casual</h4>
                                <p class="text-sm text-gray-600">Rahat, günlük kıyafetler</p>
                            </div>
                        </div>
                        <div class="style-card glass-effect p-4 rounded-xl" onclick="selectStyle('formal')">
                            <input type="radio" name="style" value="formal" class="hidden" id="formal">
                            <div class="text-center">
                                <i class="fas fa-user-tie text-3xl mb-2 text-gray-700"></i>
                                <h4 class="text-lg font-semibold">Formal</h4>
                                <p class="text-sm text-gray-600">Şık, profesyonel</p>
                            </div>
                        </div>
                        <div class="style-card glass-effect p-4 rounded-xl" onclick="selectStyle('trendy')">
                            <input type="radio" name="style" value="trendy" class="hidden" id="trendy">
                            <div class="text-center">
                                <i class="fas fa-fire text-3xl mb-2 text-red-500"></i>
                                <h4 class="text-lg font-semibold">Trendy</h4>
                                <p class="text-sm text-gray-600">Moda odaklı, güncel</p>
                            </div>
                        </div>
                        <div class="style-card glass-effect p-4 rounded-xl" onclick="selectStyle('boho')">
                            <input type="radio" name="style" value="boho" class="hidden" id="boho">
                            <div class="text-center">
                                <i class="fas fa-leaf text-3xl mb-2 text-green-500"></i>
                                <h4 class="text-lg font-semibold">Boho</h4>
                                <p class="text-sm text-gray-600">Doğal, özgür</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Favorite Brands -->
            <div class="profile-info">
                <h3 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <i class="fas fa-tags mr-3 text-purple-400"></i>
                    Favori Markalarınız
                </h3>
                
                <!-- View Mode -->
                <div class="readonly-content">
                    <div class="flex flex-wrap" id="brandsList">
                        <span class="brand-tag">Zara</span>
                        <span class="brand-tag">H&M</span>
                        <span class="brand-tag">Nike</span>
                        <span class="brand-tag">Adidas</span>
                    </div>
                </div>

                <!-- Edit Mode -->
                <div class="edit-content">
                    <div class="relative">
                        <i class="fas fa-store absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input 
                            type="text" 
                            id="brandsInput"
                            value="Zara, H&M, Nike, Adidas"
                            placeholder="Örn: Zara, H&M, Nike, Adidas..." 
                            class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white/90"
                        >
                    </div>
                    <p class="text-sm text-white/70 mt-2">Virgülle ayırarak yazabilirsiniz</p>
                </div>
            </div>

            <!-- Avoided Colors -->
            <div class="profile-info">
                <h3 class="text-xl font-semibold mb-4 text-white flex items-center">
                    <i class="fas fa-eye-slash mr-3 text-red-400"></i>
                    Kaçındığınız Renkler
                </h3>
                
                <!-- View Mode -->
                <div class="readonly-content">
                    <div class="flex flex-wrap" id="colorsList">
                        <span class="color-tag">Neon renkler</span>
                        <span class="color-tag">Çok parlak tonlar</span>
                    </div>
                </div>

                <!-- Edit Mode -->
                <div class="edit-content">
                    <div class="relative">
                        <i class="fas fa-palette absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input 
                            type="text" 
                            id="colorsInput"
                            value="Neon renkler, Çok parlak tonlar"
                            placeholder="Örn: Neon renkler, çok parlak tonlar..." 
                            class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200 bg-white/90"
                        >
                    </div>
                    <p class="text-sm text-white/70 mt-2">Hiç sevmediğiniz renkleri yazabilirsiniz</p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center mt-8">

                <!-- Edit Mode Buttons -->
                <div class="edit-content space-x-4">
                    <button 
                        onclick="cancelEdit()"
                        class="bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-all duration-200"
                    >
                        <i class="fas fa-times mr-2"></i>
                        İptal
                    </button>
                    <button 
                        onclick="saveChanges()"
                        class="bg-gradient-to-r from-green-500 to-teal-500 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-600 hover:to-teal-600 transform hover:scale-105 transition-all duration-200 shadow-lg"
                    >
                        <i class="fas fa-save mr-2"></i>
                        Değişiklikleri Kaydet
                    </button>
                </div>
            </div>
        </div>

        <!-- Success Message -->
        <div id="successMessage" class="glass-effect p-4 mt-4 text-center text-green-700 font-semibold rounded-lg" style="display: none;">
            <i class="fas fa-check-circle mr-2"></i>
            Değişiklikleriniz başarıyla kaydedildi!
        </div>
    </div>

    <script>
        // Get data from URL parameters or localStorage (from style test)
        function getUserDataFromTest() {
            const urlParams = new URLSearchParams(window.location.search);
            let userData = {
                style: urlParams.get('style') || 'casual',
                brands: [],
                avoidColors: []
            };

            // Parse brands
            const brandsParam = urlParams.get('brands');
            if (brandsParam) {
                userData.brands = brandsParam.split(',').map(brand => brand.trim()).filter(brand => brand);
            }

            // Parse avoid colors
            const colorsParam = urlParams.get('avoid_colors');
            if (colorsParam) {
                userData.avoidColors = colorsParam.split(',').map(color => color.trim()).filter(color => color);
            }

            // If no URL params, try to get from form data or set defaults
            if (!urlParams.get('style') && !brandsParam && !colorsParam) {
                userData = {
                    style: 'casual',
                    brands: ['Hiç marka tercihi belirtilmedi'],
                    avoidColors: ['Hiç renk kısıtı belirtilmedi']
                };
            }

            return userData;
        }

        let currentUserData = getUserDataFromTest();
        let originalData = {...currentUserData};

        function toggleEditMode() {
            const container = document.getElementById('profileContainer');
            const editBtn = document.getElementById('editBtn');
            
            if (container.classList.contains('view-mode')) {
                container.classList.remove('view-mode');
                container.classList.add('edit-mode');
                editBtn.innerHTML = '<i class="fas fa-eye mr-2"></i>Görüntüle';
                // Store original data for cancel functionality
                originalData = JSON.parse(JSON.stringify(currentUserData));
            } else {
                container.classList.remove('edit-mode');
                container.classList.add('view-mode');
                editBtn.innerHTML = '<i class="fas fa-edit mr-2"></i>Düzenle';
            }
        }

        function selectStyle(style) {
            // Remove previous selection
            document.querySelectorAll('.style-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            event.currentTarget.classList.add('selected');
            
            // Update radio button
            document.getElementById(style).checked = true;
        }

        function updateStyleDisplay(style) {
            const styleData = {
                casual: { icon: 'fas fa-tshirt', title: 'Casual', desc: 'Rahat, günlük ve konforlu kıyafetler', color: 'text-blue-400' },
                formal: { icon: 'fas fa-user-tie', title: 'Formal', desc: 'Şık, klasik ve profesyonel görünüm', color: 'text-gray-400' },
                trendy: { icon: 'fas fa-fire', title: 'Trendy', desc: 'Moda odaklı, güncel ve cesur', color: 'text-red-400' },
                boho: { icon: 'fas fa-leaf', title: 'Boho', desc: 'Doğal, özgür ve artistik', color: 'text-green-400' }
            };

            const data = styleData[style];
            document.getElementById('currentStyle').innerHTML = `
                <i class="${data.icon} text-3xl mr-4 ${data.color}"></i>
                <div>
                    <h4 class="text-lg font-semibold text-white">${data.title}</h4>
                    <p class="text-white/80">${data.desc}</p>
                </div>
            `;
        }

        function updateBrandsList(brands) {
            const brandsList = document.getElementById('brandsList');
            brandsList.innerHTML = brands.map(brand => `<span class="brand-tag">${brand}</span>`).join('');
        }

        function updateColorsList(colors) {
            const colorsList = document.getElementById('colorsList');
            colorsList.innerHTML = colors.map(color => `<span class="color-tag">${color}</span>`).join('');
        }

        function saveChanges() {
            // Get selected style
            const selectedStyle = document.querySelector('input[name="style"]:checked').value;
            
            // Get brands
            const brandsValue = document.getElementById('brandsInput').value;
            const brands = brandsValue.split(',').map(brand => brand.trim()).filter(brand => brand);
            
            // Get avoid colors
            const colorsValue = document.getElementById('colorsInput').value;
            const colors = colorsValue.split(',').map(color => color.trim()).filter(color => color);
            
            // Update current data
            currentUserData = {
                style: selectedStyle,
                brands: brands,
                avoidColors: colors
            };
            
            // Update displays
            updateStyleDisplay(selectedStyle);
            updateBrandsList(brands);
            updateColorsList(colors);
            
            // Update last modified date
            document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('tr-TR');
            
            // Switch back to view mode
            toggleEditMode();
            
            // Show success message
            const successMsg = document.getElementById('successMessage');
            successMsg.style.display = 'block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
        }

        function cancelEdit() {
            // Restore original values
            document.getElementById('brandsInput').value = originalData.brands.join(', ');
            document.getElementById('colorsInput').value = originalData.avoidColors.join(', ');
            document.getElementById(originalData.style).checked = true;
            
            // Update style selection display
            document.querySelectorAll('.style-card').forEach(card => card.classList.remove('selected'));
            document.querySelector(`#${originalData.style}`).closest('.style-card').classList.add('selected');
            
            toggleEditMode();
        }

        function retakeTest() {
            if (confirm('Testi yeniden almak mevcut tercihlerinizi sıfırlayacak. Devam etmek istiyor musunuz?')) {
                // Redirect to style test page
                window.location.href = '/style-test.html';
            }
        }

        function getRecommendations() {
            // Redirect to recommendations page
            window.location.href = '/recommendations.html';
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial selected style
            document.querySelector(`#${currentUserData.style}`).closest('.style-card').classList.add('selected');
            
            // Set initial form values
            document.getElementById('brandsInput').value = currentUserData.brands.join(', ');
            document.getElementById('colorsInput').value = currentUserData.avoidColors.join(', ');
            
            // Update displays
            updateStyleDisplay(currentUserData.style);
            updateBrandsList(currentUserData.brands);
            updateColorsList(currentUserData.avoidColors);
        });
    </script>
</body>
</html>